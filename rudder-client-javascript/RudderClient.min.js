function generateUUID(){var e=new Date.getTime();typeof performance!=='undefined'&&typeof performance.now==='function'&&(e+=performance.now());return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(r){var t=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(r==='x'?t:t&3|8).toString(16)})}function convertToMap(e){let r=new Map;Object.keys(e).forEach(t=>{r.set(t,e[t])});return r}function getJSON(e,r){var t=new XMLHttpRequest;t.open('get',e,!0);t.responseType='json';t.onload=function(){var e=t.status;e==200?r(null,t.response):r(e)};t.send()}var MessageType={TRACK:"track",PAGE:"page",SCREEN:"screen",IDENTIFY:"identify"},ECommerceParamNames={QUERY:"query",PRICE:"price",PRODUCT_ID:"product_id",CATEGORY:"category",CURRENCY:"currency",LIST_ID:"list_id",PRODUCTS:"products",WISHLIST_ID:"wishlist_id",WISHLIST_NAME:"wishlist_name",QUANTITY:"quantity",CART_ID:"cart_id",CHECKOUT_ID:"checkout_id",TOTAL:"total",REVENUE:"revenue",ORDER_ID:"order_id"},ECommerceEvents={PRODUCTS_SEARCHED:"Products Searched",PRODUCT_LIST_VIEWED:"Product List Viewed",PRODUCT_LIST_FILTERED:"Product List Filtered",PROMOTION_VIEWED:"Promotion Viewed",PROMOTION_CLICKED:"Promotion Clicked",PRODUCT_CLICKED:"Product Clicked",PRODUCT_VIEWED:"Product Viewed",PRODUCT_ADDED:"Product Added",PRODUCT_REMOVED:"Product Removed",CART_VIEWED:"Cart Viewed",CHECKOUT_STARTED:"Checkout Started",CHECKOUT_STEP_VIEWED:"Checkout Step Viewed",CHECKOUT_STEP_COMPLETED:"Checkout Step Completed",PAYMENT_INFO_ENTERED:"Payment Info Entered",ORDER_UPDATED:"Order Updated",ORDER_COMPLETED:"Order Completed",ORDER_REFUNDED:"Order Refunded",ORDER_CANCELLED:"Order Cancelled",COUPON_ENTERED:"Coupon Entered",COUPON_APPLIED:"Coupon Applied",COUPON_DENIED:"Coupon Denied",COUPON_REMOVED:"Coupon Removed",PRODUCT_ADDED_TO_WISHLIST:"Product Added to Wishlist",PRODUCT_REMOVED_FROM_WISHLIST:"Product Removed from Wishlist",WISH_LIST_PRODUCT_ADDED_TO_CART:"Wishlist Product Added to Cart",PRODUCT_SHARED:"Product Shared",CART_SHARED:"Cart Shared",PRODUCT_REVIEWED:"Product Reviewed"},RudderIntegrationPlatform={RUDDERLABS:"rudderlabs",GA:"ga",AMPLITUDE:"amplitude"};let BASE_URL="https://rudderlabs.com",FLUSH_QUEUE_SIZE=30;class RudderProperty{contructor(){new Map}getProperty(e){return propertyMap.has(e)?propertyMap.get(e):null}setProperty(e,r){propertyMap.set(e,r)}hasProperty(e){return propertyMap.has(e)}getPropertyMap(){return this.propertyMap}setProperty(e){if(!this.propertyMap)this.propertyMap=e;else{for(var r of e.entries())this.propertyMap.set(r,e.get(r))}}}class PagePropertyBuilder{constructor(){this.title="";this.url="";this.path="";this.referrer="";this.search="";this.keywords=""}build(){if(!this.url||0===this.url.length){throw new Error("Page url cannot be null or empty")}var e=new RudderProperty;e.setProperty("title",this.title);e.setProperty("url",this.url);e.setProperty("path",this.path);e.setProperty("referrer",this.referrer);e.setProperty("search",this.search);e.setProperty("keywords",this.keywords);return e}}class ScreenPropertyBuilder{constructor(){this.name=""}build(){if(!this.name||0===this.name){throw new Error("Screen name cannot be null or empty")}var e=new RudderProperty;e.setProperty("name",this.name);return e}}class ECommerceOrder{contructor(){this.order_id="";this.affiliation="";this.total=0;this.value=0;this.revenue=0;this.shipping=0;this.tax=0;this.discount=0;this.coupon="";this.currency="";this.products=[]}}class ECommerceProduct{constructor(){this.product_id="";this.sku="";this.category="";this.name="";this.brand="";this.variant="";this.price=0;this.currency="";this.quantity=0;this.coupon="";this.position=0;this.url="";this.image_url=""}}class ECommercePromotion{constructor(){this.promotion_id="";this.creative="";this.name="";this.position=0}}class ECommerceCart{constructor(){this.cart_id="";this.products=[]}addProducts(e){e&&this.products.pushValues(e)}addProduct(e){e&&this.products.push(e)}}class ECommerceCoupon{constructor(){this.cart_id="";this.order_id="";this.coupon_id="";this.coupon_name="";this.discount=0;this.reason=""}}class ECommerceWishList{constructor(){this.wishlist_id="";this.wishlist_name=""}}class ECommerceCheckout{constructor(){this.checkout_id="";this.order_id="";this.step="";this.shipping_method="";this.payment_method=""}}class CheckoutStartedEvent{constructor(){this.order=null;this.checkout=null}event(){return ECommerceEvents.CHECKOUT_STARTED}build(){var e=new RudderProperty;e.setProperty(convertToMap(this.order));e.setProperty(convertToMap(this.checkout));return e}}class OrderCompletedEvent{constructor(){this.order=null}event(){return ECommerceEvents.ORDER_COMPLETED}build(){var e=new RudderProperty;e.setProperty(convertToMap(this.order))}}class ProductAddedToCartEvent{contructor(){this.product=null;this.cartId=null}event(){return ECommerceEvents.PRODUCT_ADDED}build(){var e=new RudderProperty;e.setProperty(convertToMap(this.product));e.setProperty(ECommerceEvents.PRODUCT_ADDED,this.cartId);return e}}class ProductAddedToWishlistEvent{contructor(){this.product=null;this.cartId=null}event(){return ECommerceEvents.PRODUCT_ADDED}build(){var e=new RudderProperty;e.setProperty(convertToMap(this.product));e.setProperty(ECommerceEvents.PRODUCT_ADDED,this.cartId);return e}}class ProductListViewedEvent{constructor(){this.listId=null;this.category=null;this.products=[]}addProducts(e){this.products?this.products.pushValues(e):(this.products=e)}addProduct(e){this.products||(this.products=[]);this.products.push(e)}event(){return ECommerceEvents.PRODUCT_LIST_VIEWED}build(){var e=new RudderProperty;e.setProperty(ECommerceParamNames.LIST_ID,this.listId);e.setProperty(ECommerceParamNames.CATEGORY,this.category);e.setProperty(ECommerceParamNames.PRODUCTS,this.products);return e}}class ProductRemovedEvent{constructor(){this.product=null}event(){return ECommerceEvents.PRODUCT_REMOVED}build(){var e=new RudderProperty;e.setProperty(convertToMap(this.product));return e}}class ProductSearchedEvent{constructor(){this.query=null}event(){return ECommerceEvents.PRODUCTS_SEARCHED}build(){var e=new RudderProperty;e.setProperty(ECommerceParamNames.QUERY,this.query);return e}}class ProductViewedEvent{constructor(){this.product=null}event(){return ECommerceEvents.PRODUCT_VIEWED}build(){var e=new RudderProperty;e.setProperty(convertToMap(this.product));return e}}var RudderConfig=(function(){var e;function r(){[];return{getDefaultIntegrations:function(){return[]},getEndPointUri:function(){return this.endPointUri},getFlushQueueSize:function(){return this.flushQueueSize},getIntegrations:function(){return this.integrations},setIntegrations:function(e){this.integrations=e},setFlushQueueSize:function(e){this.flushQueueSize=e},setEndPointUri:function(e){this.endPointUri=e}}}return{getDefaultConfig:function(){e||(e=r());return e}}})();class EventRepository{contructor(e,r){this.eventsBuffer=[];this.writeKey=e;this.rudderConfig=r;getJSON(BASE_URL,function(e,r){if(e){throw new Error("unable to download configurations from server")}})}addToFlushQueue(e){this.eventBuffer.push(e);if(this.eventBuffer.length==this.rudderConfig.getFlushQueueSize()){var r=JSON.stringify(eventBuffer),t=new XMLHttpRequest;console.log(r);t.open("POST",this.rudderConfig.getEndPointUri(),!0);t.setRequestHeader("Content-Type","application/json");t.onreadystatechange=function(){t.readyState===4&&t.status===200&&(this.eventBuffer=[])};t.send(r)}}}class RudderPayload{constructor(){this.curDateTime=new Date.toISOString();this.curDate=curDateTime.split('T')[0];this.curTimeExceptMillis=curDateTime.split('T')[1].split('Z')[0].split('.')[0];this.curTimeMillis=curDateTime.split('Z')[0].split('.')[1];this.sent_at=curDate+" "+curTimeExceptMillis+"+"+curTimeMillis;this.batch=null}}class RudderElement{constructor(){this.rl_message=new RudderMessage}setType(e){this.rl_message.rl_type=e}setProperty(e){this.rl_message.rl_properties=rudderProoperty}setUserId(e){this.rl_message.rl_user_id=e}setEventName(e){this.rl_message.rl_event=e}updateTraits(e){this.rl_message.rl_context.rl_traits=e}addIntegrationProps(e,r,t){this.rl_message.rl_integrations.set(e,r);r&&this.rl_message.rl_destination_properties.set(e,t)}}class RudderElementBuilder{constructor(){this.rudderProperty=null;this.event=null;this.userId=null;this.channel=null}setProperty(e){this.rudderProperty=e;return this}setPropertyMap(e){this.rudderProperty||(this.rudderProperty=new RudderProperty);this.rudderProperty.addProperties(e);return this}setPropertyBuilder(e){this.rudderProperty=e.build();return this}setEvent(e){this.event=e;return this}setUserId(e){this.userId=e;return this}setChannel(e){this.channel=e;return this}build(){element=new RudderElement;element.setUserId(this.userId);element.setEventName(this.event);element.setProperty(this.rudderProperty);return element}}class RudderMessage{constructor(){this.rl_channel="web";this.rl_context=null;this.rl_type=null;this.rl_action=null;this.rl_message_id=generateUUID().toString();this.rl_timestamp=new Date.getTime();this.rl_anonymous_id=null;this.rl_user_id=null;this.rl_event=null;this.rl_properties=new Map;this.rl_integrations=new Map;this.rl_destination_properties=new Map}getProperty(e){return this.rl_properties.get(e)}addProperty(e,r){this.rl_properties.set(e,r)}validateFor(e){if(!this.rl_properties){throw new Error("Key rl_properties is required")}switch(e){case MessageType.TRACK:if(!this.rl_event){throw new Error("Key rl_event is required for track event")};if(this.rl_event in Object.values(ECommerceEvents)){switch(rl_event){case ECommerceEvents.CHECKOUT_STEP_VIEWED:;case ECommerceEvents.CHECKOUT_STEP_COMPLETED:;case ECommerceEvents.PAYMENT_INFO_ENTERED:checkForKey("checkout_id");checkForKey("step");break;case ECommerceEvents.PROMOTION_VIEWED:;case ECommerceEvents.PROMOTION_CLICKED:checkForKey("promotion_id");break;case ECommerceEvents.ORDER_REFUNDED:checkForKey("order_id");break;default:}}else if(!this.rl_properties.has("category")||!this.rl_properties.get("category")){throw new Error("Key 'category' is required in rl_properties")};break;case MessageType.PAGE:break;case MessageType.SCREEN:if(!this.rl_properties.has("name")||!this.rl_properties.get("name")){throw new Error("Key 'name' is required in rl_properties")};break}}checkForKey(e){if(!this.rl_properties.has(e)||!this.rl_properties.get(e)){throw new Error("Key '"+e+"' is required in rl_properties")}}addIntegration(e){this.rl_integrations.push(e)}addIntegrations(e){this.rl_integrations.pushValues(e)}}class RudderContext{constructor(){this.rl_app=null;this.rl_traits=null;this.rl_library=null;var e=new RudderOSInfo;e.rl_version="";var r=new RudderScreenInfo;typeof window==='undefined'?(r.rl_width=0,r.rl_height=0,r.rl_density=0,e.rl_version="",e.rl_name="",this.rl_user_agent=null,this.rl_locale=null):(r.rl_width=window.width,r.rl_height=window.height,r.rl_density=window.devicePixelRatio,this.rl_user_agent=navigator.userAgent,this.rl_locale=navigator.language||navigator.browserLanguage);this.screen=r;this.rl_device=null;this.rl_network=null}}class RudderApp{constructor(){this.rl_build="";this.rl_name="";this.rl_namespace="";this.rl_version=""}}class RudderTraits{constructor(){this.rl_address=null;this.rl_age=null;this.rl_birthday=null;this.rl_company=null;this.rl_createdat=null;this.rl_description=null;this.rl_email=null;this.rl_firstname=null;this.rl_gender=null;this.rl_id=null;this.rl_lastname=null;this.rl_name=null;this.rl_phone=null;this.rl_phone=null;this.rl_title=null;this.rl_username=null}}class TraitsAddress{constructor(){this.rl_city="";this.rl_country="";this.rl_postalcode="";this.rl_state="";this.rl_street=""}}class TraitsCompany{constructor(){this.rl_name="";this.rl_id="";this.rl_industry=""}}class RudderLibraryInfo{constructor(){this.rl_name="";this.rl_version=""}}class RudderOSInfo{constructor(){this.rl_name="";this.rl_version=""}}class RudderScreenInfo{constructor(){this.rl_density=0;this.rl_width=0;this.rl_height=0}}class RudderDeviceInfo{constructor(){this.rl_id="";this.rl_manufacturer="";this.rl_model="";this.rl_name=""}}class RudderNetwork{constructor(){this.rl_carrier=""}}var RudderClient=(function(){var e;function r(){return{initiateIntegrations:function(e){},track:function(e){e.rl_message&&(e.rl_message.validateFor(MessageType.TRACK),e.rl_message.rl_type=MessageType.TRACK,this.eventRepository.addToFlushQueue(e))},page:function(e){e.rl_message&&(e.rl_message.validateFor(MessageType.PAGE),e.rl_message.rl_type=MessageType.PAGE,this.eventRepository.addToFlushQueue(e))},screen:function(e){e.rl_message&&(e.rl_message.validateFor(MessageType.SCREEN),e.rl_message.rl_type=MessageType.SCREEN,this.eventRepository.addToFlushQueue(e))},identify:function(e){var r=new RudderElementBuilder.setEvent(MessageType.IDENTIFY).setUserId(e.rl_id).build();r.updateTraits(e);r.setType(MessageType.IDENTIFY);this.eventRepository.addToFlushQueue(r)}}}return{getInstance:function(t,n){if(!e){if(!t||0===t.length){throw new Error("writeKey cannot be null or empty")}if(!n){throw new Error("rudderConfig cannot be null")}e=r();this.eventRepository=new EventRepository(t,n);this.rudderConfig=n}return e}}})(),Instance1=RudderClient.getInstance("dummykey",RudderConfig.getDefaultConfig())
